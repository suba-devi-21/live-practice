"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_github_quote-selection_dist_index_js-node_modules_react-intersection-obs-075542"],{66661:(e,t,n)=>{function r(e){let t=e.parentNode;if(null===t||!(t instanceof HTMLElement))throw Error();let n=0;t instanceof HTMLOListElement&&1!==t.start&&(n=t.start-1);let r=t.children;for(let t=0;t<r.length;++t)if(r[t]===e)return n+t;return n}n.d(t,{P:()=>Quote,g:()=>MarkdownQuote});let o=0;function l(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let i={INPUT:e=>e instanceof HTMLInputElement&&e.checked?"[x] ":"[ ] ",CODE(e){let t=e.textContent||"";return e.parentNode&&"PRE"===e.parentNode.nodeName?(e.textContent=`\`\`\`
${t.replace(/\n+$/,"")}
\`\`\`

`,e):t.indexOf("`")>=0?`\`\` ${t} \`\``:`\`${t}\``},P(e){let t=document.createElement("p"),n=e.textContent||"";return t.textContent=n.replace(/<(\/?)(pre|strong|weak|em)>/g,"\\<$1$2\\>"),t},STRONG:e=>`**${e.textContent||""}**`,EM:e=>`_${e.textContent||""}_`,DEL:e=>`~${e.textContent||""}~`,BLOCKQUOTE(e){let t=(e.textContent||"").trim().replace(/^/gm,"> "),n=document.createElement("pre");return n.textContent=`${t}

`,n},A(e){let t=e.textContent||"",n=e.getAttribute("href");return/^https?:/.test(t)&&t===n?t:n?`[${t}](${n})`:t},IMG(e){let t=e.getAttribute("alt")||"",n=e.getAttribute("src");if(!n)throw Error();let r=e.hasAttribute("width")?` width="${l(e.getAttribute("width")||"")}"`:"",o=e.hasAttribute("height")?` height="${l(e.getAttribute("height")||"")}"`:"";return r||o?`<img alt="${l(t)}"${r}${o} src="${l(n)}">`:`![${t}](${n})`},LI(e){let t=e.parentNode;if(!t)throw Error();let n="";if(!function(e){let t=e.childNodes[0],n=e.childNodes[1];return!!t&&e.childNodes.length<3&&("OL"===t.nodeName||"UL"===t.nodeName)&&(!n||n.nodeType===Node.TEXT_NODE&&!(n.textContent||"").trim())}(e)){if("OL"===t.nodeName){if(o>0&&!t.previousSibling){let t=r(e)+o+1;n=`${t}\\. `}else n=`${r(e)+1}. `}else n="* "}let l=n.replace(/\S/g," "),i=(e.textContent||"").trim().replace(/^/gm,l),s=document.createElement("pre");return s.textContent=i.replace(l,n),s},OL(e){let t=document.createElement("li");return t.appendChild(document.createElement("br")),e.append(t),e},H1(e){let t=parseInt(e.nodeName.slice(1));return e.prepend(`${Array(t+1).join("#")} `),e},UL:e=>e};i.UL=i.OL;for(let e=2;e<=6;++e)i[`H${e}`]=i.H1;let Quote=class Quote{constructor(){this.selection=window.getSelection(),this.processSelectionText=e=>e}closest(e){let t=this.range.startContainer,n=t instanceof Element?t:t.parentElement;return n?n.closest(e):null}get active(){var e;return((null===(e=this.selection)||void 0===e?void 0:e.rangeCount)||0)>0}get range(){var e;return(null===(e=this.selection)||void 0===e?void 0:e.rangeCount)?this.selection.getRangeAt(0):new Range}set range(e){var t,n;null===(t=this.selection)||void 0===t||t.removeAllRanges(),null===(n=this.selection)||void 0===n||n.addRange(e)}set processSelectionTextFn(e){this.processSelectionText=e}get selectionText(){var e;return this.processSelectionText((null===(e=this.selection)||void 0===e?void 0:e.toString().trim())||"")}get quotedText(){return`> ${this.selectionText.replace(/\n/g,"\n> ")}

`}select(e){this.selection&&(this.selection.removeAllRanges(),this.selection.selectAllChildren(e))}insert(e){e.value?e.value=`${e.value}

${this.quotedText}`:e.value=this.quotedText,e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1})),e.focus(),e.selectionStart=e.value.length,e.scrollTop=e.scrollHeight}};let MarkdownQuote=class MarkdownQuote extends Quote{constructor(e="",t){super(),this.scopeSelector=e,this.callback=t}get selectionText(){var e,t;if(!this.selection)return"";let n=function(e,t){let n=e.startContainer;if(!n||!n.parentNode||!(n.parentNode instanceof HTMLElement))throw Error("the range must start within an HTMLElement");let l=n.parentNode,i=e.cloneContents();if(t){let e=i.querySelector(t);e&&(i=document.createDocumentFragment()).appendChild(e)}o=0;let s=l.closest("li");if(l.closest("pre")){let e=document.createElement("pre");e.appendChild(i),(i=document.createDocumentFragment()).appendChild(e)}else if(s&&s.parentNode&&("OL"===s.parentNode.nodeName&&(o=r(s)),!i.querySelector("li"))){let e=document.createElement("li");if(!s.parentNode)throw Error();let t=document.createElement(s.parentNode.nodeName);e.appendChild(i),t.appendChild(e),(i=document.createDocumentFragment()).appendChild(t)}return i}(this.range,null!==(e=this.scopeSelector)&&void 0!==e?e:"");null===(t=this.callback)||void 0===t||t.call(this,n),function(e){let t=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.nodeName in i&&!function(e){if(e instanceof HTMLAnchorElement&&1===e.childNodes.length){let t=e.childNodes[0];if(t instanceof HTMLImageElement)return t.src===e.href}return!1}(e)&&("IMG"===e.nodeName||null!=e.firstChild||"INPUT"===e.nodeName&&e instanceof HTMLInputElement&&"checkbox"===e.type)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),n=[],r=t.nextNode();for(;r;)r instanceof HTMLElement&&n.push(r),r=t.nextNode();for(let e of(n.reverse(),n))e.replaceWith(i[e.nodeName](e))}(n);let l=document.body;if(!l)return"";let s=document.createElement("div");s.appendChild(n),s.style.cssText="position:absolute;left:-9999px;",l.appendChild(s);let c="";try{let e=document.createRange();e.selectNodeContents(s),this.selection.removeAllRanges(),this.selection.addRange(e),c=this.selection.toString(),this.selection.removeAllRanges(),e.detach()}finally{l.removeChild(s)}return this.processSelectionText(c.trim())}}},40094:(e,t,n)=>{let r;n.d(t,{Wx:()=>c});var o=n(96540);let l=new Map,i=new WeakMap,s=0;function c({threshold:e,delay:t,trackVisibility:n,rootMargin:c,root:a,triggerOnce:d,skip:u,initialInView:h,fallbackInView:p,onChange:g}={}){var m;let[f,v]=o.useState(null),E=o.useRef(),[N,C]=o.useState({inView:!!h,entry:void 0});E.current=g,o.useEffect(()=>{let o;if(!u&&f)return o=function(e,t,n={},o=r){if(void 0===window.IntersectionObserver&&void 0!==o){let r=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}let{id:c,observer:a,elements:d}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var n;return`${t}_${"root"===t?(n=e.root)?(i.has(n)||(s+=1,i.set(n,s.toString())),i.get(n)):"0":e[t]}`}).toString(),n=l.get(t);if(!n){let r;let o=new Map,i=new IntersectionObserver(t=>{t.forEach(t=>{var n;let l=t.isIntersecting&&r.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=l),null==(n=o.get(t.target))||n.forEach(e=>{e(l,t)})})},e);r=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:o},l.set(t,n)}return n}(n),u=d.get(e)||[];return d.has(e)||d.set(e,u),u.push(t),a.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(d.delete(e),a.unobserve(e)),0===d.size&&(a.disconnect(),l.delete(c))}}(f,(e,t)=>{C({inView:e,entry:t}),E.current&&E.current(e,t),t.isIntersecting&&d&&o&&(o(),o=void 0)},{root:a,rootMargin:c,threshold:e,trackVisibility:n,delay:t},p),()=>{o&&o()}},[Array.isArray(e)?e.toString():e,f,a,c,d,u,n,p,t]);let x=null==(m=N.entry)?void 0:m.target,T=o.useRef();f||!x||d||u||T.current===x||(T.current=x,C({inView:!!h,entry:void 0}));let b=[v,N.inView,N.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}}}]);
//# sourceMappingURL=vendors-node_modules_github_quote-selection_dist_index_js-node_modules_react-intersection-obs-075542-882647afbbbe.js.map